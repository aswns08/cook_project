<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.cooks.dao.RecipeBoardDao">

	<select id="getRecipeCount" resultType="Integer">
			select count(*) from RECIPE_BOARD
	</select>
	
	<select id="getArticles" parameterType="HashMap" resultType="recipeVO">
		select * 
		from (select rownum rm,human.* from 
		     (select RECIPE_NUM, ID, RECIPE_TITLE, RECIPE_HIT, RECIPE_DATE, RECIPE_LIKE 
		     from RECIPE_BOARD order by RECIPE_NUM desc) human) 		
		where rm between #{startRow} and #{endRow}
	</select>
	
	<insert id="write"  parameterType="HashMap">
	 	insert into RECIPE_BOARD values(recipe_seq.NEXTVAL, #{userId}, #{recipeVO.recipe_title}, #{recipeVO.recipe_content}, sysdate, 0, 0)
	</insert>
	
	<select id="content" parameterType="Integer" resultType="recipeVO">
		select * from RECIPE_BOARD where recipe_num=#{recipe_num}
	</select>
	
	<select id="getUpdateRecipe" parameterType="Integer" resultType="recipeVO">
		select RECIPE_NUM, RECIPE_TITLE, RECIPE_CONTENT
		from RECIPE_BOARD where recipe_num=#{recipe_num}
	</select>
	
	<update id="update" parameterType="recipeVO">
		update RECIPE_BOARD set recipe_title=#{recipe_title}, recipe_content= #{recipe_content}
		where recipe_num=#{recipe_num}
	</update>
	
	<delete id="delete" parameterType="Integer">
		delete from RECIPE_BOARD where recipe_num=#{recipe_num}
	</delete>
	
	<select id="getCommentCount" parameterType="Integer" resultType="Integer">
		select count(*) from RECIPE_COMMENTS where recipe_num=#{recipe_num}
	</select>
	
	<update id="addLike" parameterType="Integer">
		update RECIPE_BOARD set recipe_like=recipe_like+1
		where recipe_num=#{recipe_num}
	</update>
	
	<update id="minusLike" parameterType="Integer">
		update RECIPE_BOARD set recipe_like=recipe_like-1
		where recipe_num=#{recipe_num}
	</update>
	
	<select id="getRecipeLike" parameterType="Integer" resultType="Integer">
		select recipe_like from RECIPE_BOARD  where recipe_num=#{recipe_num}
	</select>
	
	<update id="recipeHit" parameterType="Integer">
		update RECIPE_BOARD set recipe_hit=recipe_hit+1
		where recipe_num=#{recipe_num}
	</update>
	
</mapper>